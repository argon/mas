#!/bin/bash -e
#
# script/bootstrap
# mas
#
# Installs gem tools, installs Swift dependencies via CocoaPods and sorts
# the Xcode project file references.
#

main() {
  script/clean

  echo "==> ðŸ‘¢ Bootstrapping"

  # Install ruby tools
  bundle install

  # Skip Homebrew when running on Jenkins
  if [[ $USER != "jenkins" ]]; then
    # Install Mint and shellcheck
    brew bundle install --no-upgrade --verbose
  fi

  # Set up mint cache to be relative to user HOME
  export MINT_PATH=~/.mint/cache
  mkdir -p $MINT_PATH
  mint bootstrap --link --verbose

  # Download and build project dependencies
  carthage bootstrap --platform macOS --cache-builds
}

main
